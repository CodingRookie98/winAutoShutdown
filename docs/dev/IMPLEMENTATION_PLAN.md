# 实施计划: 阶段 4 - 系统集成与功能增强

## 阶段 4.1: 后端真实系统调用实现
**目标**: 使用 `windows` crate 实现 `SystemControl` trait，替代当前的 mock 实现。
**成功标准**:
- [x] 在 `Cargo.toml` 中引入 `windows` crate 并正确配置 features (Win32_Security, Shutdown, Power)。
- [x] 实现权限提升逻辑 (`enable_shutdown_privilege`)。
- [x] 实现 `WindowsSystemControl` 结构体及 `SystemControl` trait。
- [x] 实现 `shutdown`, `reboot`, `sleep`, `lock` 等方法的真实调用。
- [x] 替换 `main.rs` 或 `lib.rs` 中的 Mock 注入。
**测试**:
- 单元测试（尽可能 mock 或测试非破坏性部分）。
- 手动验证：在虚拟机或真机上测试各功能。
**状态**: 已完成

## 阶段 4.2: 前端 UI 重构与时间选择升级
**目标**: 升级 `TaskForm` 组件，支持更直观的倒计时输入和精确的时间点选择。
**成功标准**:
- [ ] 重构 `TaskForm.vue`。
- [ ] 实现倒计时选择器（天/时/分/秒）。
- [ ] 实现绝对时间选择器（日期时间选择）。
- [x] TaskStore 逻辑更新，统一使用时间戳处理。
**测试**:
- Vitest 组件测试：验证输入值与 Store 状态的同步。
- 验证倒计时逻辑在跨天情况下的正确性。
**状态**: 进行中

## 阶段 4.3: 系统集成与 IPC 联调
**目标**: 前后端联调，确保前端操作能正确触发后端真实逻辑。
**成功标准**:
- [ ] 前端点击“开始任务”能正确调用后端 Command。
- [ ] 后端执行结果（成功/失败）能反馈给前端。
- [ ] 错误处理完善（如权限不足提示）。
**测试**:
- 完整流程测试：设置任务 -> 倒计时 -> 触发关机（需谨慎测试）。
**状态**: 未开始
